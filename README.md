# GotoSun


http://bbs.elecfans.com/forum.php?mod=post&action=edit&fid=686&tid=1145301&pid=5817891&page=1


一、引言（意义）
众所周知：太阳能是数量巨大的环保清洁能源，每年到达地球表面的太阳辐射能约为目前世界 能耗总和的 2×104 倍，世界环保协会近日的 一份报告上说，从目前到本世纪中叶，太阳能 的开发将进入高潮，它在全球能源中占的比 例将从目前的 1％激增50％。
随着不同时段太 阳照射位置的不同，无法随时让太阳能光电 板与阳光保持垂直，因此也无法使太阳能板 可以长时间发挥其最大效率，尤其在上午与 下午太阳斜射时，效果最差。为了能随时或分 时段变换太阳能电池板的旋转角度，从而达到最大限度地吸收太阳能目的的，因此太阳能追日系统是十分意义的项目。

-----文章引用来自《太阳能追日系统控制装置的研究》
研究表明，太阳能设备对太阳光线运动的跟踪与非跟踪，其能量的利用率相差37.7％。
《太阳光线自动跟踪装置》论文是关于研究一种基于图像传感器的太阳光线自
动跟踪装置。根据小孑L成像原理设计光学成像机构，将发散的太阳光线通过小孔投影在接收屏上，成为太阳光斑。放置在接收屏下方的图像传感器采集接收屏上的图像信息，并输出数字图像信号。数字图像处理器对该数字图像进行处理，提取光斑的亮度特征，得到光斑在接收屏上的位置坐标以及太阳光线对接收屏的高度角和方位角，在数码管上显示检测结果。当成像机构所在平面与太阳光线不垂直时，数字信号处理器根据上述两个角度通过执行机构调整成像机构的位置。


二．方案的确定
综合确定方案：从成本与项目周期等因素考虑--在这里我采用下面计划:
1.        相比于二维PSD传感器，我在这里采用廉价的光敏传感器5516
2.        设计没有采用步进电机，而是采用了舵机，缺点是舵机只能0~180°旋转，但是从地球围绕太阳周转，并且自转，由东边升起，西边落下，180°的旋转角度已经够很好采集阳光，而且可以节约很大的成本，简化设计。
3.        附属设计：采集周围环境的湿度与温度，分析当天天气。

三．方案的设计
1）.光强度采集电路
布局：
   

用比较器，分别比较东西（左右） 与 南北（上下）未知的光敏电阻，把下图中的VR1滑动电阻换成与LM393同相端一样的光敏电阻电路
光照强度增加，光敏电阻阻值减少，电压降低，当同相端大于反相端时，输出为1，反之，输出为0，这样可以通过0与1判断东西 或者 南北 光照强度，进一步控制舵机转向。

我并没有采用上述电路，原因：
1.因为上述电路并没有容差，上下左右光强不一定一样，那很难平衡，这一确定可以通过再加一个运放改正的。
2.电路设计复杂了，但程序编写简单了。
个人是直接通过AD转换采集上下左右的光强度，通过程序比较光强度值，判断四周光强，进一步控制舵机运转。

原理：
由四颗特性相近光敏电阻构成，负责侦测东西南北四个方向的光源强度，于各方向均有一个光敏电阻，并朝向光源处，四个传感器分为两组，一组是两个光敏电阻做为东西向的传感器，用以比较东西向受光强度的差异。当东西向的传感器接受到的光源强度不一致时，系统会依据东西向两传感器输出电压得到信号,判断该方向的受光较强，并且驱动舵机朝向该方前进，当东西向传感器输出值相等时，则输出的差值为零、电机驱动电压亦为零，即追踪到太阳目前的位置。另一组的南北向传感器，则是相似的原理，用来追踪太阳在南北向的位置。

2.舵机的控制
舵机直接连接IntoRobot开发板的PWM引脚，通过不同占空比控制舵机运转角度。




四、APP编辑设计



五、程序

视频地址：http://v.youku.com/v_show/id_XMj ... 0.0&from=s1.8-1-1.2
[media=x,500,375]http://v.youku.com/v_show/id_XMjg3OTUyMzQ5Mg==.html?spm=a2h0k.8191407.0.0&from=s1.8-1-1.2[/media]


六、总结
1.光敏传感器这种布局没有很好的隔离东西南北光照，采样值可能不是很精确。
建议采用隔板，相互隔离东西南北的光
2.对光敏电阻预筛选，挑选4个敏感度差不多的光敏电阻传感器
3.本设计不足之处，没有采用PID控制，仅仅通过逻辑判定，慢慢靠近光强度最大点，不能很快响应。
本项目——追日太阳能系统基本功能已经完成，本设计的不足之处，等有时间再完善。
在这里感谢电子发烧论坛与intorobot提供的设计平台，感谢支持！！！
如果大家有更好的见解，希望大家能畅所欲言！！！


